@use "src/lib/style/core/spacing";
@use "src/lib/style/core/theming";
@use "src/lib/style/core/typography";
@use "src/lib/style/core/transitioning";
@use "src/lib/style/core/display";
@use "src/lib/style/core/border";
/*****************************************************************************
Popper
******************************************************************************/

// THEME
@mixin popper-theme($theme) {
  &.sb--#{$theme} &__popper {
    background: theming.get-background($theme);
    color: theming.get-background-text($theme);
    @include border.border-accent($theme);
  }

  &.sb--#{$theme} &__arrow {
    fill: theming.get-accent($theme);
  }
}

// ROOT
.sb-popper {
  display: block;
  position: relative;

  &[class*="top"] &__popper {
    margin-bottom: calc(#{spacing.get-spacing(s)} / 2);
    bottom: 100%;
  }

  &[class*="left"] &__popper {
    margin-right: calc(#{spacing.get-spacing(s)} / 2);
    right: 100%;
  }

  &[class*="right"] &__popper {
    margin-left: calc(#{spacing.get-spacing(s)} / 2);
    left: 100%;
  }

  &[class*="bottom"] &__popper {
    margin-top: calc(#{spacing.get-spacing(s)} / 2);
    top: 100%;
  }

  &__popper {
    display: block;
    position: absolute;
    z-index: 997;
    @include transitioning.ease(200ms, opacity);
    @include spacing.padding(s);
    @include border.radius(s);
  }

  &.sb--hidden &__popper {
    display: none;
  }

  &.sb--visibly-hidden &__popper {
    opacity: 0;
  }

  &.sb--visible &__popper {
    opacity: 1;
  }

  &__arrow {
    position: absolute;
  }

  &[class*="top"] &__arrow {
    width: spacing.get-spacing(s);
    left: calc(50% - #{spacing.get-spacing(s)} / 2);
    top: 100%;
  }

  &[class*="left"] &__arrow {
    height: spacing.get-spacing(s);
    top: calc(50% - #{spacing.get-spacing(s)} / 2);
    left: 100%;
  }

  &[class*="right"] &__arrow {
    height: spacing.get-spacing(s);
    top: calc(50% - #{spacing.get-spacing(s)} / 2);
    right: 100%;
  }

  &[class*="bottom"] &__arrow {
    width: spacing.get-spacing(s);
    left: calc(50% - #{spacing.get-spacing(s)} / 2);
    bottom: 100%;
  }

  @include theming.for-each-theme using ($theme, $theme-palette) {
    @include popper-theme($theme);
  }
}
