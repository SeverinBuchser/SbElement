@use "src/style/core/spacing";
@use "src/style/core/theming";
@use "src/style/core/transitioning";
@use "src/style/core/display";
@use "src/style/core/border";
/*****************************************************************************
Checkbox-Group
******************************************************************************/

// THEME
@mixin select-button-theme($theme, $color) {
  &--#{$theme}-#{$color} {
    color: theming.get-text($theme, $color);

    button {
      &:hover {
        color: theming.get-text-inverted($theme, $color);
      }
      &:disabled:hover {
        color: theming.get-text($theme, $color);
      }
    }
  }
  &--#{$theme}-#{$color} &__option {
    background: theming.get-color($theme, $color);
    color: theming.get-text($theme, $color);
    &:hover {
      background: theming.get-color-inverted($theme, $color);
      color: theming.get-text-inverted($theme, $color);
    }
    &:disabled:hover {
      background: theming.get-color($theme, $color);
      color: theming.get-text($theme, $color);
    }
  }
}

// SIZE
@mixin select-button-size($size, $value) {
  &--#{$size} button {
    width: calc($value * 5);
  }

  &--#{$size} &__option {
    width: calc($value * 5);
    @include spacing.padding-x(s);
    @include spacing.padding-y(calc(spacing.get-spacing(s) / 2));
  }
  @include select-button-pill($size, $value);
}

// SIZE
@mixin select-button-pill($size, $value) {
  &--#{$size}.pill &__options {
    border-bottom-left-radius: calc($value / 2);
    border-bottom-right-radius: calc($value / 2);
  }
}

// ROOT
.sb-select-button {
  position: relative;
  cursor: pointer;

  $button-animation-duration: 300ms;
  $options-animation-duration: 100ms;

  button {
    transition-delay: $options-animation-duration;
    @include transitioning.ease($button-animation-duration,
      background,
      color,
      border-radius
    );
    @include display.flex(space-around);
    .sb-icon {
      @include transitioning.ease($button-animation-duration, color, transform);
    }
  }

  &__options {
    overflow: hidden;
    height: auto;
    transform-origin:top;
    position: absolute;
    transform: scaleY(0);
    @include border.radius-bottom-left(s);
    @include border.radius-bottom-right(s);
    @include transitioning.ease($options-animation-duration, transform);
  }

  &__option {
    @include display.flex();
    @include transitioning.ease(300ms, background, color);
  }

  &.open button {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    @include transitioning.ease($button-animation-duration,
      background,
      color,
      border-radius
    );
    transition-delay: 0;
    .sb-icon {transform: rotate(180deg);}
  }

  &.open &__options {
    transition-delay: $button-animation-duration;
    transform: scaleY(1);
  }

  @include theming.for-each-theme-color using ($theme, $theme-palette, $color,
  $color-palette) {
    @include select-button-theme($theme, $color);
  }

  @include spacing.for-each-size using ($size, $value) {
    @include select-button-size($size, $value);
  }
}
