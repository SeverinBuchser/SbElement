@use "src/lib/style/core/spacing";
@use "src/lib/style/core/theming";
@use "src/lib/style/core/transitioning";
@use "src/lib/style/core/display";
@use "src/lib/style/core/border";
@use "src/lib/style/core/animation";
/*****************************************************************************
Checkbox
******************************************************************************/

// THEME
@mixin checkbox-theme($theme, $color) {
  &.sb--#{$theme}.sb--#{$color} input {
    border-color: theming.get-accent($theme);
  }

  &.sb--#{$theme}.sb--#{$color} input:checked {
    background: theming.get-color($theme, $color);
    border-color: theming.get-color($theme, $color);
  }

  &.sb--#{$theme}.sb--#{$color} input:checked ~ .sb-icon {
    color: theming.get-text($theme, $color);
  }
}

// ROOT
.sb-checkbox {

  label {
    cursor: pointer;
    @include display.flex($justify: flex-start, $gap: s);
  }

  span:empty {
    display: none;
  }

  span {
    @include display.flex();
    height: 100%;
  }

  &__checkbox {
    position: relative;
    @include display.flex();
    height: spacing.get-spacing(m);
    width: spacing.get-spacing(m);
  }

  input {
    height: 100%;
    width: 100%;
    cursor: pointer;
    appearance: none;
    /* For iOS < 15 to remove gradient background */
    background-color: transparent;
    @include border.border($width: m);
    @include border.radius(2px);
    /* Not removed via appearance */
    @include spacing.margin(0);
    @include transitioning.ease(200ms, background, border);
  }

  .sb-icon {
    position: absolute;
    opacity: 0;
    @include transitioning.ease(200ms, opacity);
    font-size: 100%;
  }

  input:checked ~ .sb-icon {
    opacity: 1;
  }

  &.disabled label {
    cursor: not-allowed;
    input { cursor: not-allowed; }
  }

  @include theming.for-each-theme-color using ($theme, $theme-palette, $color,
  $color-palette) {
    @include checkbox-theme($theme, $color);
  }
}
