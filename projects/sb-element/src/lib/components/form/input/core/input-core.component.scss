@use "src/style/core/spacing";
@use "src/style/core/theming";
@use "src/style/core/transitioning";
@use "src/style/core/typography";
@use "src/style/core/display";
@use "src/style/core/border";
/*****************************************************************************
Input-Core
******************************************************************************/

// THEME
@mixin input-core-theme($theme, $color) {
  &.sb--#{$theme}.sb--#{$color} {
    color: theming.get-foreground-text($theme);
    input {
      color: theming.get-foreground-text($theme);
    }
    .sb-input-core__placeholder {
      color: theming.get-foreground-text($theme);

      &.top {
        background: theming.get-foreground($theme);
      }
    }

    .sb-input-core__spinner-control {
      color: theming.get-foreground-text($theme);
      &:hover {
        background: theming.get-accent($theme);
      }

      &:active {
        background: theming.get-color-inverted($theme, $color);
        color: theming.get-text-inverted($theme, $color);
      }
    }
  }
}

// SIZE
@mixin input-core-size($size, $value) {
  &.sb--#{$size} {
    height: $value;
    .sb-input-core__spinner-control {
      border-radius: 4px;
    }
  }

  &.sb--#{$size} .sb-input-core__placeholder.top {
    transform:
      scale(0.75)
      translateY(calc(
        ($value / (-2))
        - 87.5%
        - border.get-border-width(l)
      ));
  }
}

// ROOT
.sb-input-core {
  width: 100%;
  position: relative;
  display: flex;

  &:focus {
    outline: 1px solid red;
  }

  input {
    width: 100%;
    background: transparent;
    outline: none;
    border: 0;
    @include spacing.padding(0);
    @include typography.font($size: s);
    
    &::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
      -webkit-appearance: none;
    }
  }

  &__spinner-controls {
    @include spacing.margin-left(s);
    @include display.flex($direction: column);
    height: 100%;
  }

  &__spinner-control {
    @include transitioning.ease(200ms, background, color);
    transform: rotate(-90deg);
    font-size: 110% !important;
    text-decoration: none;
    cursor: pointer;
  }

  &__placeholder {
    position: absolute;
    top: 50%;
    left: -4px;
    @include spacing.padding-x(4px);
    @include typography.font($size: s);
    pointer-events: none;
    transform-origin: left center;
    transform: translateY(-50%);

    @include transitioning.ease(200ms, transform, color);
  }

  &.disabled input {
    cursor: not-allowed;
  }

  @include theming.for-each-theme-color using ($theme, $theme-palette, $color,
  $color-palette) {
    @include input-core-theme($theme, $color);
  }

  @include spacing.for-each-size using ($size, $value) {
    @include input-core-size($size, $value);
  }
}
