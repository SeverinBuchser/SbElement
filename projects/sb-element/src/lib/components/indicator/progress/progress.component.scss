@use "src/style/core/theming";
@use "src/style/core/spacing";
@use "src/style/core/display";
@use "src/style/core/border";
@use "src/style/core/animation";
/*****************************************************************************
Progress
******************************************************************************/

// THEME
@mixin progress-theme($theme, $color) {
  &.sb--#{$theme} {
    &:not(.outline) {
      background: theming.get-accent($theme);
    }

    &.outline {
      @include border.border-accent($theme, d);
    }
  }

  &.sb--#{$theme}.sb--#{$color} &__bar {
    background-color: theming.get-color($theme, $color);
    color: theming.get-text($theme, $color);
  }

  &.sb--#{$theme}.sb--#{$color}.striped &__bar {
    background-image: linear-gradient(45deg,
      rgba(0,0,0,0) 25%,
      theming.get-color-inverted($theme, $color) 25%,
      theming.get-color-inverted($theme, $color) 50%,
      rgba(0,0,0,0) 50%,
      rgba(0,0,0,0) 75%,
      theming.get-color-inverted($theme, $color) 75%,
      theming.get-color-inverted($theme, $color) 100%,
      rgba(0,0,0,0) 100%
    );
  }
}

// SIZE
@mixin progress-size($size, $value) {
  &.sb--#{$size} {
    height: spacing.get-spacing($size);

    &.pill {
      @include border.radius($size);
    }
  }

  &.sb--#{$size} &__bar {
    font-size: calc(spacing.get-spacing($size) - 2px);
    background-size: $value $value;
  }

  @include animation.keyframes(progress-stripes--#{$size}) {
      0% {background-position-x: $value;}
  }

  &.sb--#{$size}.animated &__bar {
    @include animation.animation(progress-stripes--#{$size} 2s infinite linear);
  }
}

// ROOT
.sb-progress {

  @include display.flex($justify: flex-start);
  @include border.radius(s);
  overflow: hidden;
  width: 100%;

  &__bar {
    height: 100%;
    @include display.flex();
  }

  @include theming.for-each-theme-color using ($theme, $theme-palette, $color,
  $color-palette) {
    @include progress-theme($theme, $color);
  }

  @include spacing.for-each-size using ($size, $value) {
    @include progress-size($size, $value);
  }

  &.sb--xs {
    height: 2px;
    border-radius: 0;
  }

  &.sb--xs &__bar {
    background-image: none !important;
  }

}
